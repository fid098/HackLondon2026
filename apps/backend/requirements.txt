# TruthGuard API — Python dependencies
# Note: loose pins used where Python 3.14 wheels require newer versions.

# ─── Web framework ────────────────────────────────────────────────
fastapi==0.111.1
uvicorn[standard]==0.30.3

# ─── Database ─────────────────────────────────────────────────────
motor==3.5.0           # Async MongoDB driver (wraps pymongo with asyncio)
pymongo==4.8.0         # Sync driver (used by motor internally + for scripts)

# ─── Validation / settings ────────────────────────────────────────
pydantic[email]>=2.10.0    # 2.8.x has no Python 3.14 wheels
pydantic-settings>=2.3.4

# ─── Auth (Phase 1) ───────────────────────────────────────────────
python-jose[cryptography]==3.3.0
bcrypt>=4.0.0             # Direct bcrypt; passlib[bcrypt] has bcrypt 4 compat issues

# ─── HTTP client (for adapters + tests) ───────────────────────────
httpx>=0.28.1             # >=0.28.1 required by google-genai

# ─── TLS certificates ─────────────────────────────────────────────
certifi>=2024.0.0         # CA bundle for MongoDB Atlas TLS on macOS

# ─── File uploads ─────────────────────────────────────────────────
python-multipart==0.0.9

# ─── Utilities ────────────────────────────────────────────────────
python-dotenv==1.0.1

# ─── Article / HTML extraction ────────────────────────────────────
beautifulsoup4==4.12.3    # HTML parsing for article content extraction
lxml>=5.3.0               # Fast BS4 parser backend (5.2.x has no Python 3.14 wheels)
youtube-transcript-api==0.6.2  # YouTube transcript fetching (optional)

# ─── Google AI (lazy-imported in real mode only) ──────────────────
google-genai>=1.0.0       # New HTTP-based SDK; replaces google-generativeai

# ─── Testing ──────────────────────────────────────────────────────
pytest==8.3.2
pytest-asyncio==0.23.8
anyio[trio]>=4.8.0        # google-genai requires >=4.8.0

# ─── Rate limiting ────────────────────────────────────────────────
slowapi==0.1.9            # Starlette/FastAPI rate limiting (wraps limits library)

# ─── Linting / formatting ─────────────────────────────────────────
ruff==0.5.5
